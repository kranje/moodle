define ("assignsubmission_onlinepoodll/submissionhelper",["jquery","core/log","core/str"],function(a,b,c){"use strict";b.debug("submission helper: initialising");return{uploadstate:!1,togglestate:0,strings:{},init:function init(a){this.component=a.component;this.filecontrolid=a.filecontrolid;this.togglingthing=a.togglingthing;this.safesave=a.safesave;this.register_controls();this.register_events();if("currentsubmission"==this.togglingthing){if(a.expandcurrentsubmission){this.toggle_currentsubmission(this)}}},register_controls:function register_controls(){var d=this;this.controls={};this.controls.formsubmitbutton=a("#id_submitbutton");this.controls.deletebutton=a("."+this.component+"_deletesubmissionbutton");this.controls.updatecontrol=a("#"+this.filecontrolid);this.controls.currentcontainer=a("."+this.component+"_currentsubmission");this.controls.reccontainer=a("."+this.component+"_recorder");this.controls.togglecontainer=a("."+this.component+"_togglecontainer");this.controls.togglebutton=a("."+this.component+"_togglecontainer .togglebutton");this.controls.toggletext=a("."+this.component+"_togglecontainer .toggletext");var d=this,e=function(c){if(c){switch(c[1]){case"filesubmitted":var e=c[2],f=c[3],g=new CustomEvent("prassigsubUploaded",{details:c});document.dispatchEvent(g);if(1==d.safesave){d.controls.formsubmitbutton.removeAttr("disabled")}var h="";if("undefined"!=typeof f&&""!==f){h=a("[id=\""+f+"\"]")}if(1>h.length){h=a("[id=\""+f+"\"]",window.parent.document)}if(0<h.length){h.get(0).value=e}else{b.debug("upload failed #2");return!1}h.trigger("change");break;case"started":if(1==d.safesave){d.controls.formsubmitbutton.attr("disabled","disabled")}break;}}};window.prassigsub=e;c.get_string("clicktohide",d.component).done(function(a){d.strings.clicktohide=a});c.get_string("clicktoshow",d.component).done(function(a){d.strings.clicktoshow=a})},register_events:function register_events(){var a=this;this.controls.deletebutton.click(function(){if(a.controls.updatecontrol){if(confirm(M.util.get_string("reallydeletesubmission",a.component))){a.controls.updatecontrol.val(-1);a.controls.currentcontainer.html("")}}});if("currentsubmission"===this.togglingthing){this.controls.togglebutton.click(function(){a.toggle_currentsubmission(a)});this.controls.toggletext.click(function(){a.toggle_currentsubmission(a)})}else if("recorder"===this.togglingthing){this.controls.togglebutton.click(function(){a.toggle_recorder(a)});this.controls.toggletext.click(function(){a.toggle_recorder(a)})}},do_toggle:function do_toggle(a){if(0===a.togglestate){a.controls.togglebutton.removeClass("fa-toggle-off");a.controls.togglebutton.addClass("fa-toggle-on");a.controls.toggletext.text(a.strings.clicktohide);a.togglestate=1}else{a.controls.togglebutton.removeClass("fa-toggle-on");a.controls.togglebutton.addClass("fa-toggle-off");a.controls.toggletext.text(a.strings.clicktoshow);a.togglestate=0}},toggle_currentsubmission:function toggle_currentsubmission(a){a.controls.currentcontainer.toggle({duration:300,complete:function complete(){a.do_toggle(a)}});return!1},toggle_recorder:function toggle_recorder(a){a.controls.reccontainer.toggle({duration:300,complete:function complete(){a.do_toggle(a)}});return!1}}});
//# sourceMappingURL=submissionhelper.min.js.map
