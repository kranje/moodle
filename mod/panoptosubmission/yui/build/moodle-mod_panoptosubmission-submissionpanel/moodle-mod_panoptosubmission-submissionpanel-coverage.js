
var __cov_sIRX6QAG1uMwxGjts$mGNg = (Function('return this'))();
if (!__cov_sIRX6QAG1uMwxGjts$mGNg.__coverage__) { __cov_sIRX6QAG1uMwxGjts$mGNg.__coverage__ = {}; }
__cov_sIRX6QAG1uMwxGjts$mGNg = __cov_sIRX6QAG1uMwxGjts$mGNg.__coverage__;
if (!(__cov_sIRX6QAG1uMwxGjts$mGNg['build/moodle-mod_panoptosubmission-submissionpanel/moodle-mod_panoptosubmission-submissionpanel.js'])) {
   __cov_sIRX6QAG1uMwxGjts$mGNg['build/moodle-mod_panoptosubmission-submissionpanel/moodle-mod_panoptosubmission-submissionpanel.js'] = {"path":"build/moodle-mod_panoptosubmission-submissionpanel/moodle-mod_panoptosubmission-submissionpanel.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},"b":{"1":[0,0],"2":[0,0,0,0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":56},"end":{"line":1,"column":75}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":29},"end":{"line":30,"column":40}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":28}}},"4":{"name":"(anonymous_4)","line":60,"loc":{"start":{"line":60,"column":34},"end":{"line":60,"column":66}}},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":47}}},"6":{"name":"(anonymous_6)","line":162,"loc":{"start":{"line":162,"column":46},"end":{"line":162,"column":63}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":166,"column":108}},"2":{"start":{"line":30,"column":0},"end":{"line":32,"column":2}},"3":{"start":{"line":31,"column":4},"end":{"line":31,"column":73}},"4":{"start":{"line":34,"column":0},"end":{"line":153,"column":3}},"5":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"6":{"start":{"line":46,"column":12},"end":{"line":46,"column":19}},"7":{"start":{"line":49,"column":8},"end":{"line":49,"column":39}},"8":{"start":{"line":51,"column":8},"end":{"line":51,"column":58}},"9":{"start":{"line":52,"column":8},"end":{"line":52,"column":123}},"10":{"start":{"line":61,"column":8},"end":{"line":72,"column":11}},"11":{"start":{"line":74,"column":8},"end":{"line":74,"column":52}},"12":{"start":{"line":75,"column":8},"end":{"line":75,"column":103}},"13":{"start":{"line":79,"column":8},"end":{"line":79,"column":68}},"14":{"start":{"line":81,"column":8},"end":{"line":87,"column":61}},"15":{"start":{"line":90,"column":8},"end":{"line":90,"column":51}},"16":{"start":{"line":91,"column":8},"end":{"line":91,"column":77}},"17":{"start":{"line":92,"column":8},"end":{"line":92,"column":70}},"18":{"start":{"line":95,"column":8},"end":{"line":95,"column":62}},"19":{"start":{"line":97,"column":8},"end":{"line":97,"column":87}},"20":{"start":{"line":98,"column":8},"end":{"line":98,"column":86}},"21":{"start":{"line":99,"column":8},"end":{"line":99,"column":90}},"22":{"start":{"line":100,"column":8},"end":{"line":100,"column":80}},"23":{"start":{"line":101,"column":8},"end":{"line":101,"column":82}},"24":{"start":{"line":102,"column":8},"end":{"line":102,"column":97}},"25":{"start":{"line":103,"column":8},"end":{"line":103,"column":98}},"26":{"start":{"line":104,"column":8},"end":{"line":104,"column":100}},"27":{"start":{"line":106,"column":8},"end":{"line":106,"column":54}},"28":{"start":{"line":107,"column":8},"end":{"line":107,"column":71}},"29":{"start":{"line":109,"column":8},"end":{"line":109,"column":79}},"30":{"start":{"line":110,"column":8},"end":{"line":110,"column":74}},"31":{"start":{"line":111,"column":8},"end":{"line":111,"column":78}},"32":{"start":{"line":112,"column":8},"end":{"line":112,"column":80}},"33":{"start":{"line":115,"column":8},"end":{"line":115,"column":66}},"34":{"start":{"line":116,"column":8},"end":{"line":116,"column":68}},"35":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"36":{"start":{"line":119,"column":12},"end":{"line":119,"column":75}},"37":{"start":{"line":122,"column":8},"end":{"line":122,"column":53}},"38":{"start":{"line":124,"column":8},"end":{"line":124,"column":100}},"39":{"start":{"line":126,"column":8},"end":{"line":126,"column":57}},"40":{"start":{"line":127,"column":8},"end":{"line":127,"column":55}},"41":{"start":{"line":128,"column":8},"end":{"line":128,"column":58}},"42":{"start":{"line":129,"column":8},"end":{"line":129,"column":60}},"43":{"start":{"line":130,"column":8},"end":{"line":130,"column":46}},"44":{"start":{"line":155,"column":0},"end":{"line":155,"column":56}},"45":{"start":{"line":162,"column":0},"end":{"line":164,"column":2}},"46":{"start":{"line":163,"column":4},"end":{"line":163,"column":46}}},"branchMap":{"1":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]},"2":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":38}},{"start":{"line":45,"column":42},"end":{"line":45,"column":69}},{"start":{"line":45,"column":73},"end":{"line":45,"column":94}},{"start":{"line":45,"column":98},"end":{"line":45,"column":117}},{"start":{"line":45,"column":121},"end":{"line":45,"column":139}}]},"3":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]},"4":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":26},"end":{"line":155,"column":49}},{"start":{"line":155,"column":53},"end":{"line":155,"column":55}}]}},"code":["(function () { YUI.add('moodle-mod_panoptosubmission-submissionpanel', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * YUI module for displaying an LTI launch within a YUI panel."," *"," * @package mod_panoptosubmission"," * @copyright  Panopto 2021"," * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * This panel will create the Panopto LTI embed window and update the submission buttons on view.php once a submission is selected."," * @method PANOPTOSUBMISSIONFRAME"," */","var PANOPTOSUBMISSIONFRAME = function() {","    PANOPTOSUBMISSIONFRAME.superclass.constructor.apply(this, arguments);","};","","Y.extend(PANOPTOSUBMISSIONFRAME, Y.Base, {","","    courseid: null,","","    /**","     * Init function for the checkboxselection module","     * @property params","     * @type {Object}","     */","    init : function(params) {","        // Check to make sure parameters are initialized","        if ('0' === params.addvidbtnid || '0' === params.ltilaunchurl || 0 === params.courseid || 0 === params.height || 0 === params.width) {","            return;","        }","","        this.courseid = params.courseid","","        var addvideobtn = Y.one('#' + params.addvidbtnid);","        addvideobtn.on('click', this.open_panopto_window_callback, this, params.ltilaunchurl, params.height, params.width);","    },","","    /**","     * Event handler callback for when the panel content is changed","     * @property e","     * @type {Object}","     */","    open_panopto_window_callback: function(e, url, height, width) {","        var panoptoWindow = new M.core.dialogue({","            bodyContent: '<iframe src=\"' + url + '\" width=\"100%\" height=\"100%\"></iframe>',","            headerContent: M.util.get_string('select_submission', 'panoptosubmission'),","            width: width,","            height: height,","            draggable: false,","            visible: true,","            zindex: 100,","            modal: true,","            focusOnPreviousTargetAfterHide: true,","            render: true","        });","","        document.body.panoptoWindow = panoptoWindow;","        document.body.addEventListener('sessionSelected', this.close_popup_callback.bind(this), false);","    },","","    close_popup_callback: function(closeEvent) {","        Y.one('input[id=submit_video]').removeAttribute('disabled');","        // Update the iframe element attributes and sec to point to correct content.","        var iframenode = Y.one('iframe[id=contentframe]'),","            contentwrappernode = Y.one('div[id=contentcontainer]'),","            thumbnailnode = Y.one('img[id=panoptothumbnail]'),","            thumbnaillinknode = Y.one('a[id=panoptothumbnaillink]'),","            titlenode = Y.one('a[id=panoptosessiontitle]'),","            newSubmissionSource = new URL(closeEvent.detail.ltiViewerUrl),","            search_params = newSubmissionSource.searchParams;","","        // This will encode the params so decode the json once to make sure it is not double encoded.","        search_params.set('course', this.courseid);","        search_params.set('custom', decodeURI(closeEvent.detail.customData));","        search_params.set('contentUrl', closeEvent.detail.contentUrl);","","        // change the search property of the main url","        newSubmissionSource.search = search_params.toString();","","        Y.one('input[id=sessiontitle]').setAttribute('value', closeEvent.detail.title);","        Y.one('input[id=source]').setAttribute('value', closeEvent.detail.contentUrl);","        Y.one('input[id=customdata]').setAttribute('value', closeEvent.detail.customData);","        Y.one('input[id=width]').setAttribute('value', closeEvent.detail.width);","        Y.one('input[id=height]').setAttribute('value', closeEvent.detail.height);","        Y.one('input[id=thumbnailsource]').setAttribute('value', closeEvent.detail.thumbnailUrl);","        Y.one('input[id=thumbnailwidth]').setAttribute('value', closeEvent.detail.thumbnailWidth);","        Y.one('input[id=thumbnailheight]').setAttribute('value', closeEvent.detail.thumbnailHeight);","","        titlenode.setContent(closeEvent.detail.title);","        titlenode.setAttribute('href', newSubmissionSource.toString());","","        thumbnaillinknode.setAttribute('href', newSubmissionSource.toString());","        thumbnailnode.setAttribute('src', closeEvent.detail.thumbnailUrl);","        thumbnailnode.setAttribute('width', closeEvent.detail.thumbnailWidth);","        thumbnailnode.setAttribute('height', closeEvent.detail.thumbnailHeight);","","        // Do not set the iframe src yet, it will cause the video to play when the iframe is not visible.","        iframenode.setAttribute('width', closeEvent.detail.width);","        iframenode.setAttribute('height', closeEvent.detail.height);","","        if (!iframenode.hasClass('session-hidden')) {","            iframenode.setAttribute('src', newSubmissionSource.toString());","        }","        ","        contentwrappernode.removeClass('no-session');","        ","        Y.one('#id_add_video').set('value', M.util.get_string('replacevideo', 'panoptosubmission'));","        // Update button classes.","        Y.one('#id_add_video').addClass('btn-secondary');","        Y.one('#submit_video').addClass('btn-primary');","        Y.one('#id_add_video').removeClass('btn-primary');","        Y.one('#submit_video').removeClass('btn-secondary');","        document.body.panoptoWindow.destroy();","    },","","},","{","    NAME : 'moodle-mod_panoptosubmission-submissionpanel',","    ATTRS : {","        addvidbtnid : {","            value: '0'","        },","        ltilaunchurl : {","            value: '0'","        },","        height : {","            value: 0","        },","        width : {","            value: 0","        },","        courseid : {","            value: 0","        }","    }","});","","M.mod_panoptosubmission = M.mod_panoptosubmission || {};","","/**"," * Entry point for PANOPTOSUBMISSIONFRAME module"," * @param string params additional parameters."," * @return object the submissionpanel object"," */","M.mod_panoptosubmission.initsubmissionpanel = function(params) {","    return new PANOPTOSUBMISSIONFRAME(params);","};","","}, '@VERSION@', {\"requires\": [\"base\", \"node\", \"panel\", \"moodle-core-notification\", \"node-event-simulate\"]});","","}());"]};
}
__cov_sIRX6QAG1uMwxGjts$mGNg = __cov_sIRX6QAG1uMwxGjts$mGNg['build/moodle-mod_panoptosubmission-submissionpanel/moodle-mod_panoptosubmission-submissionpanel.js'];
__cov_sIRX6QAG1uMwxGjts$mGNg.s['1']++;YUI.add('moodle-mod_panoptosubmission-submissionpanel',function(Y,NAME){__cov_sIRX6QAG1uMwxGjts$mGNg.f['1']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['2']++;var PANOPTOSUBMISSIONFRAME=function(){__cov_sIRX6QAG1uMwxGjts$mGNg.f['2']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['3']++;PANOPTOSUBMISSIONFRAME.superclass.constructor.apply(this,arguments);};__cov_sIRX6QAG1uMwxGjts$mGNg.s['4']++;Y.extend(PANOPTOSUBMISSIONFRAME,Y.Base,{courseid:null,init:function(params){__cov_sIRX6QAG1uMwxGjts$mGNg.f['3']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['5']++;if((__cov_sIRX6QAG1uMwxGjts$mGNg.b['2'][0]++,'0'===params.addvidbtnid)||(__cov_sIRX6QAG1uMwxGjts$mGNg.b['2'][1]++,'0'===params.ltilaunchurl)||(__cov_sIRX6QAG1uMwxGjts$mGNg.b['2'][2]++,0===params.courseid)||(__cov_sIRX6QAG1uMwxGjts$mGNg.b['2'][3]++,0===params.height)||(__cov_sIRX6QAG1uMwxGjts$mGNg.b['2'][4]++,0===params.width)){__cov_sIRX6QAG1uMwxGjts$mGNg.b['1'][0]++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['6']++;return;}else{__cov_sIRX6QAG1uMwxGjts$mGNg.b['1'][1]++;}__cov_sIRX6QAG1uMwxGjts$mGNg.s['7']++;this.courseid=params.courseid;__cov_sIRX6QAG1uMwxGjts$mGNg.s['8']++;var addvideobtn=Y.one('#'+params.addvidbtnid);__cov_sIRX6QAG1uMwxGjts$mGNg.s['9']++;addvideobtn.on('click',this.open_panopto_window_callback,this,params.ltilaunchurl,params.height,params.width);},open_panopto_window_callback:function(e,url,height,width){__cov_sIRX6QAG1uMwxGjts$mGNg.f['4']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['10']++;var panoptoWindow=new M.core.dialogue({bodyContent:'<iframe src="'+url+'" width="100%" height="100%"></iframe>',headerContent:M.util.get_string('select_submission','panoptosubmission'),width:width,height:height,draggable:false,visible:true,zindex:100,modal:true,focusOnPreviousTargetAfterHide:true,render:true});__cov_sIRX6QAG1uMwxGjts$mGNg.s['11']++;document.body.panoptoWindow=panoptoWindow;__cov_sIRX6QAG1uMwxGjts$mGNg.s['12']++;document.body.addEventListener('sessionSelected',this.close_popup_callback.bind(this),false);},close_popup_callback:function(closeEvent){__cov_sIRX6QAG1uMwxGjts$mGNg.f['5']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['13']++;Y.one('input[id=submit_video]').removeAttribute('disabled');__cov_sIRX6QAG1uMwxGjts$mGNg.s['14']++;var iframenode=Y.one('iframe[id=contentframe]'),contentwrappernode=Y.one('div[id=contentcontainer]'),thumbnailnode=Y.one('img[id=panoptothumbnail]'),thumbnaillinknode=Y.one('a[id=panoptothumbnaillink]'),titlenode=Y.one('a[id=panoptosessiontitle]'),newSubmissionSource=new URL(closeEvent.detail.ltiViewerUrl),search_params=newSubmissionSource.searchParams;__cov_sIRX6QAG1uMwxGjts$mGNg.s['15']++;search_params.set('course',this.courseid);__cov_sIRX6QAG1uMwxGjts$mGNg.s['16']++;search_params.set('custom',decodeURI(closeEvent.detail.customData));__cov_sIRX6QAG1uMwxGjts$mGNg.s['17']++;search_params.set('contentUrl',closeEvent.detail.contentUrl);__cov_sIRX6QAG1uMwxGjts$mGNg.s['18']++;newSubmissionSource.search=search_params.toString();__cov_sIRX6QAG1uMwxGjts$mGNg.s['19']++;Y.one('input[id=sessiontitle]').setAttribute('value',closeEvent.detail.title);__cov_sIRX6QAG1uMwxGjts$mGNg.s['20']++;Y.one('input[id=source]').setAttribute('value',closeEvent.detail.contentUrl);__cov_sIRX6QAG1uMwxGjts$mGNg.s['21']++;Y.one('input[id=customdata]').setAttribute('value',closeEvent.detail.customData);__cov_sIRX6QAG1uMwxGjts$mGNg.s['22']++;Y.one('input[id=width]').setAttribute('value',closeEvent.detail.width);__cov_sIRX6QAG1uMwxGjts$mGNg.s['23']++;Y.one('input[id=height]').setAttribute('value',closeEvent.detail.height);__cov_sIRX6QAG1uMwxGjts$mGNg.s['24']++;Y.one('input[id=thumbnailsource]').setAttribute('value',closeEvent.detail.thumbnailUrl);__cov_sIRX6QAG1uMwxGjts$mGNg.s['25']++;Y.one('input[id=thumbnailwidth]').setAttribute('value',closeEvent.detail.thumbnailWidth);__cov_sIRX6QAG1uMwxGjts$mGNg.s['26']++;Y.one('input[id=thumbnailheight]').setAttribute('value',closeEvent.detail.thumbnailHeight);__cov_sIRX6QAG1uMwxGjts$mGNg.s['27']++;titlenode.setContent(closeEvent.detail.title);__cov_sIRX6QAG1uMwxGjts$mGNg.s['28']++;titlenode.setAttribute('href',newSubmissionSource.toString());__cov_sIRX6QAG1uMwxGjts$mGNg.s['29']++;thumbnaillinknode.setAttribute('href',newSubmissionSource.toString());__cov_sIRX6QAG1uMwxGjts$mGNg.s['30']++;thumbnailnode.setAttribute('src',closeEvent.detail.thumbnailUrl);__cov_sIRX6QAG1uMwxGjts$mGNg.s['31']++;thumbnailnode.setAttribute('width',closeEvent.detail.thumbnailWidth);__cov_sIRX6QAG1uMwxGjts$mGNg.s['32']++;thumbnailnode.setAttribute('height',closeEvent.detail.thumbnailHeight);__cov_sIRX6QAG1uMwxGjts$mGNg.s['33']++;iframenode.setAttribute('width',closeEvent.detail.width);__cov_sIRX6QAG1uMwxGjts$mGNg.s['34']++;iframenode.setAttribute('height',closeEvent.detail.height);__cov_sIRX6QAG1uMwxGjts$mGNg.s['35']++;if(!iframenode.hasClass('session-hidden')){__cov_sIRX6QAG1uMwxGjts$mGNg.b['3'][0]++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['36']++;iframenode.setAttribute('src',newSubmissionSource.toString());}else{__cov_sIRX6QAG1uMwxGjts$mGNg.b['3'][1]++;}__cov_sIRX6QAG1uMwxGjts$mGNg.s['37']++;contentwrappernode.removeClass('no-session');__cov_sIRX6QAG1uMwxGjts$mGNg.s['38']++;Y.one('#id_add_video').set('value',M.util.get_string('replacevideo','panoptosubmission'));__cov_sIRX6QAG1uMwxGjts$mGNg.s['39']++;Y.one('#id_add_video').addClass('btn-secondary');__cov_sIRX6QAG1uMwxGjts$mGNg.s['40']++;Y.one('#submit_video').addClass('btn-primary');__cov_sIRX6QAG1uMwxGjts$mGNg.s['41']++;Y.one('#id_add_video').removeClass('btn-primary');__cov_sIRX6QAG1uMwxGjts$mGNg.s['42']++;Y.one('#submit_video').removeClass('btn-secondary');__cov_sIRX6QAG1uMwxGjts$mGNg.s['43']++;document.body.panoptoWindow.destroy();}},{NAME:'moodle-mod_panoptosubmission-submissionpanel',ATTRS:{addvidbtnid:{value:'0'},ltilaunchurl:{value:'0'},height:{value:0},width:{value:0},courseid:{value:0}}});__cov_sIRX6QAG1uMwxGjts$mGNg.s['44']++;M.mod_panoptosubmission=(__cov_sIRX6QAG1uMwxGjts$mGNg.b['4'][0]++,M.mod_panoptosubmission)||(__cov_sIRX6QAG1uMwxGjts$mGNg.b['4'][1]++,{});__cov_sIRX6QAG1uMwxGjts$mGNg.s['45']++;M.mod_panoptosubmission.initsubmissionpanel=function(params){__cov_sIRX6QAG1uMwxGjts$mGNg.f['6']++;__cov_sIRX6QAG1uMwxGjts$mGNg.s['46']++;return new PANOPTOSUBMISSIONFRAME(params);};},'@VERSION@',{'requires':['base','node','panel','moodle-core-notification','node-event-simulate']});
